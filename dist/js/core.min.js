"use strict";import ColorsCheckboxes from"./elements/ColorsCheckboxes.js";import PriceRangeCheckboxes from"./elements/PriceRangeCheckboxes.js";import SizesBoxes from"./elements/SizesBoxes.js";import ProductsView from"./elements/ProductsView.js";import showcase from"./ASP/showcase.js";import OrdenationCombobox from"./elements/OrdenationCombobox.js";import ShopCart from"./elements/ShopCart.js";import Generic from"./core/Generic.js";var __last_DOM_filterMenu,filters={colors:[],colors_available:[],price_range:[],price_range_available:[],size:[],size_available:[],orderBy:"recent",last_page_end:0,hasMorePages:!1},data=[],__first_init=!0,__mobile_mode=!1;function windowResizeEvent(e){__mobile_mode=window.innerWidth<900,createOrdenationCBBX()}function openOrCloseFilterMenu(e){if(e||(e=__last_DOM_filterMenu),__mobile_mode){let t=document.getElementById("ShopCardItensContainer");console.log(e.style.display),e.classList.contains("open")?(e.classList.remove("open"),e.classList.add("closed"),t.classList.remove("hide"),t.classList.add("showing")):(e.classList.remove("closed"),e.classList.add("open"),t.classList.remove("showing"),t.classList.add("hide")),e&&(__last_DOM_filterMenu=e)}}function createOrdenationCBBX(){let e;e=__mobile_mode?"list":"combobox",console.log(__mobile_mode),OrdenationCombobox().create("select-ordernation-filter-container-id",e=>{filters.orderBy=e,__mobile_mode&&openOrCloseFilterMenu(),show(!0)},e)}function createColorCBXs(){ColorsCheckboxes().create("colors-filter-container-id",filters.colors_available,function(e){filters.last_page_end=0,filters.colors=e,show(!0)})}function createSizeCBXs(){SizesBoxes().create("size-filter-container-id",filters.size_available,function(e){filters.last_page_end=0,filters.size=e,show(!0)})}function createPriceCBXs(){PriceRangeCheckboxes().create("price-range-filter-container-id",[filters.price_range_available[0],filters.price_range_available[1]],data.length,function(e){filters.last_page_end=0,filters.price_range=e,show(!0)})}function loadShopItens(){ProductsView().create("ShopCardItensContainer",data.data,filters.size,filters.hasMorePages,()=>{showMore()})}function showMore(){let e=[];showcase(filters.last_page_end,10,{colors_name:filters.colors,sizes:filters.size,price_range:filters.price_range,orderBy:filters.orderBy}).then(t=>{if(t.data&&data.data){for(let s=0;s<t.data.length;s++){let o=!1;for(let e=0;e<data.data.length;e++)t.data[s].id==data.data[e].id&&(console.log("FOUND!"),o=!o);o||e.push(t.data[s])}console.log("FINISHED!"),data.data=[...data.data,...e],filters.last_page_end=t.pagination.final_range,filters.hasMorePages=t.pagination.hasMorePages,loadShopItens()}else console.log("There's no more pages available!")})}function show(e=!1){showcase(filters.last_page_end,10,{colors_name:filters.colors,sizes:filters.size,price_range:filters.price_range,orderBy:filters.orderBy}).then(t=>{data=t,__first_init&&(__first_init=!1,filters.price_range_available=[t.extra.cheapest_price,t.extra.expensive_price],filters.colors_available=t.extra.unique_colors,filters.size_available=t.extra.unique_sizes,ShopCart().create("head-cart-icon-container"),createColorCBXs(),createSizeCBXs(),createOrdenationCBBX(),createPriceCBXs()),filters.hasMorePages=t.pagination.hasMorePages,e||(filters.last_page_end=t.pagination.final_range),loadShopItens(),console.log(t)})}windowResizeEvent(),window.addEventListener("resize",windowResizeEvent),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".filterOpenOrClose");for(const t of e)t.addEventListener("click",function(e){let t;"filters"==e.target.dataset.menuclass&&(t=document.getElementsByClassName("shopping-filter-menu-container")[0]),"ordernation"==e.target.dataset.menuclass&&(t=document.getElementsByClassName("select-ordernation-filter-container")[0]),openOrCloseFilterMenu(t)});const t=document.querySelectorAll(".filter-heading");for(const e of t)e.addEventListener("click",()=>{let t=document.getElementById(e.dataset.headingof);t&&(e.classList.contains("closed")?(t.style.height="max-content",e.classList.add("open"),e.classList.remove("closed")):(t.style.height="0px",e.classList.add("closed"),e.classList.remove("open")))})}),show();