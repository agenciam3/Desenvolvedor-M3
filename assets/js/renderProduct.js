import{initialData}from"./store.js";import{events}from"./events.js";import{iventory}from"./manageStore.js";export default class Products{constructor(){this.showProducts(initialData),events.on("displayProducts",this.showProducts),events.on("displayProducts",this.selectors.bind(this)),events.on("displayProducts",this.eventListeners.bind(this)),this.selectors(),this.eventListeners()}selectors(){this.buyButton=document.querySelectorAll(".products-item__btn"),this.loadMore=document.querySelector(".products__btn--accent"),this.cartCounter=document.querySelector(".spanCounter"),this.counter=0}eventListeners(){for(let t of this.buyButton)t.addEventListener("click",this.itemToCart.bind(this));this.loadMore.addEventListener("click",this.addProducts)}itemToCart(t){t.preventDefault(),this.counter+=1,this.cartCounter.innerHTML=this.counter}addProducts(){iventory.addData()}showProducts(t){let e,n="";if(0===t.length){n+='\n\n  <div class="no-item-found">\n\n      <p>Nenhum item foi encontrado</p>\n\n  </div>\n\n  ',document.querySelector(".productList").innerHTML=n}for(let s of t)e=Math.floor(s.price/s.divided_up_to*100)/100,n+=`\n\n    <article class="products-item">\n\n    <figure>\n\n      <img src="${s.img}" alt="products image">\n\n    </figure>\n\n    <h2 class="products-item__title">${s.name}</h2>\n\n    <p class="products-item__price">R$ ${s.price.toFixed(2)}</p>\n\n    <small class = "products-item__divided-by" > at√© ${s.divided_up_to}\n\n    x de R$ ${e.toFixed(2)} </small>\n\n    <a href="#" class="products-item__btn">Comprar</a>\n\n  </article>`;n+='\n\n<div class = "products__btn" >\n\n    <button class = "products__btn--accent" > Carregar mais </button> \n\n</div>',document.querySelector(".productList").innerHTML=n}}